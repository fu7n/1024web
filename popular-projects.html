<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>热门项目展示 - Scratch编程课程</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=Exo+2:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/popular-projects.css">
</head>
<body>
    <!-- 页面头部 - 美化版本 -->
    <header class="project-header">
        <div class="container">
            <div class="header-content">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <div class="title-wrapper">
                            <h1 class="main-title">
                                <i class="bi bi-stars me-2"></i>
                                热门项目展示
                            </h1>
                            <p class="title-description">精选Scratch创意编程项目，激发孩子的创造力和编程热情</p>
                        </div>
                    </div>
                    <div class="col-md-4 text-md-end">
                        <a href="scratch.html" class="back-btn">
                            <i class="bi bi-arrow-left"></i> 返回课程页面
                        </a>
                    </div>
                </div>
                
                <div class="header-decoration">
                    <div class="decoration-item d1"><i class="bi bi-controller"></i></div>
                    <div class="decoration-item d2"><i class="bi bi-music-note-beamed"></i></div>
                    <div class="decoration-item d3"><i class="bi bi-lightning"></i></div>
                    <div class="decoration-item d4"><i class="bi bi-puzzle"></i></div>
                    <div class="decoration-item d5"><i class="bi bi-palette"></i></div>
                </div>
            </div>
        </div>
    </header>

    <!-- 主要内容区域 -->
    <main class="py-5">
        <div class="container">
            <!-- 筛选工具栏 -->
            <div class="filter-toolbar mb-4">
                <div class="row g-3">
                    <div class="col-lg-6">
                        <div class="category-filter">
                            <button class="filter-btn active" data-filter="all">全部</button>
                            <button class="filter-btn" data-filter="game">游戏</button>
                            <button class="filter-btn" data-filter="animation">动画</button>
                            <button class="filter-btn" data-filter="story">故事</button>
                            <button class="filter-btn" data-filter="education">教育</button>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="d-flex gap-3 justify-content-lg-end">
                            <div class="search-box">
                                <input type="text" class="form-control" placeholder="搜索项目...">
                                <i class="bi bi-search"></i>
                            </div>
                            <div class="sort-options">
                                <select class="form-select">
                                    <option value="latest">最新发布</option>
                                    <option value="popular">最受欢迎</option>
                                    <option value="rating" selected>评分最高</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 项目展示区域 -->
            <div class="row g-4">
                <!-- 项目1 -->
                <div class="col-lg-6 col-md-6" data-aos="fade-up" data-category="game">
                    <div class="featured-project-card">
                        <div class="project-preview">
                            <img src="assets/images/projects/platform-game.jpg" alt="平台跳跃游戏" class="img-fluid">
                            <div class="project-overlay">
                                <button class="btn btn-light play-demo-btn" data-bs-toggle="modal" data-bs-target="#projectDemoModal1">
                                    <i class="bi bi-play-circle-fill"></i> 查看演示
                                </button>
                            </div>
                        </div>
                        <div class="project-content">
                            <div class="project-header">
                                <h4>冒险岛平台跳跃</h4>
                                <div class="project-badges">
                                    <span class="badge bg-primary">游戏</span>
                                    <span class="badge bg-info">热门</span>
                                </div>
                            </div>
                            <p class="project-description">一个精彩的平台跳跃游戏，玩家需要控制角色收集金币、避开障碍物并到达终点。游戏包含多个关卡，难度逐渐提升，适合初学者学习游戏设计的基本原理。</p>
                            <div class="project-meta">
                                <div class="meta-item">
                                    <i class="bi bi-people-fill"></i>
                                    <span>适合年龄: 8-12岁</span>
                                </div>
                                <div class="meta-item">
                                    <i class="bi bi-stars"></i>
                                    <span>推荐指数: 
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-half"></i>
                                    </span>
                                </div>
                                <div class="meta-item">
                                    <i class="bi bi-lightning-fill"></i>
                                    <span>难度: 中等</span>
                                </div>
                            </div>
                            <div class="project-actions">
                                <a href="#" class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#projectDemoModal1"><i class="bi bi-play-fill"></i> 运行演示</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 项目2 -->
                <div class="col-lg-6 col-md-6" data-aos="fade-up" data-aos-delay="100" data-category="animation">
                    <div class="featured-project-card">
                        <div class="project-preview">
                            <img src="assets/images/projects/music-maker.jpg" alt="音乐创作器" class="img-fluid">
                            <div class="project-overlay">
                                <button class="btn btn-light play-demo-btn" data-bs-toggle="modal" data-bs-target="#projectDemoModal2">
                                    <i class="bi bi-play-circle-fill"></i> 查看演示
                                </button>
                            </div>
                        </div>
                        <div class="project-content">
                            <div class="project-header">
                                <h4>交互式音乐创作室</h4>
                                <div class="project-badges">
                                    <span class="badge bg-success">音乐</span>
                                    <span class="badge bg-warning">创意</span>
                                </div>
                            </div>
                            <p class="project-description">一个功能丰富的音乐创作工具，用户可以选择不同的乐器、调整节拍和音调，创作并录制自己的音乐作品。项目包含可视化音效和互动元素，激发音乐创作灵感。</p>
                            <div class="project-meta">
                                <div class="meta-item">
                                    <i class="bi bi-people-fill"></i>
                                    <span>适合年龄: 10-14岁</span>
                                </div>
                                <div class="meta-item">
                                    <i class="bi bi-stars"></i>
                                    <span>推荐指数: 
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star"></i>
                                    </span>
                                </div>
                                <div class="meta-item">
                                    <i class="bi bi-lightning-fill"></i>
                                    <span>难度: 初级</span>
                                </div>
                            </div>
                            <div class="project-actions">
                                <a href="#" class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#projectDemoModal2"><i class="bi bi-play-fill"></i> 运行演示</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 项目3 -->
                <div class="col-lg-6 col-md-6" data-aos="fade-up" data-aos-delay="200" data-category="story">
                    <div class="featured-project-card">
                        <div class="project-preview">
                            <img src="assets/images/projects/interactive-story.jpg" alt="互动故事" class="img-fluid">
                            <div class="project-overlay">
                                <button class="btn btn-light play-demo-btn" data-bs-toggle="modal" data-bs-target="#projectDemoModal3">
                                    <i class="bi bi-play-circle-fill"></i> 查看演示
                                </button>
                            </div>
                        </div>
                        <div class="project-content">
                            <div class="project-header">
                                <h4>奇幻冒险互动故事</h4>
                                <div class="project-badges">
                                    <span class="badge bg-danger">故事</span>
                                    <span class="badge bg-secondary">教育</span>
                                </div>
                            </div>
                            <p class="project-description">一个引人入胜的互动故事项目，读者可以通过选择不同的选项来影响故事的发展方向。故事包含多个分支和结局，配有精美的插图和音效，提供沉浸式的阅读体验。</p>
                            <div class="project-meta">
                                <div class="meta-item">
                                    <i class="bi bi-people-fill"></i>
                                    <span>适合年龄: 7-12岁</span>
                                </div>
                                <div class="meta-item">
                                    <i class="bi bi-stars"></i>
                                    <span>推荐指数: 
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-half"></i>
                                    </span>
                                </div>
                                <div class="meta-item">
                                    <i class="bi bi-lightning-fill"></i>
                                    <span>难度: 中等</span>
                                </div>
                            </div>
                            <div class="project-actions">
                                <a href="#" class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#projectDemoModal3"><i class="bi bi-play-fill"></i> 运行演示</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 项目4 -->
                <div class="col-lg-6 col-md-6" data-aos="fade-up" data-aos-delay="300" data-category="education">
                    <div class="featured-project-card">
                        <div class="project-preview">
                            <img src="assets/images/projects/quiz-game.jpg" alt="益智问答" class="img-fluid">
                            <div class="project-overlay">
                                <button class="btn btn-light play-demo-btn" data-bs-toggle="modal" data-bs-target="#projectDemoModal4">
                                    <i class="bi bi-play-circle-fill"></i> 查看演示
                                </button>
                            </div>
                        </div>
                        <div class="project-content">
                            <div class="project-header">
                                <h4>知识竞赛问答游戏</h4>
                                <div class="project-badges">
                                    <span class="badge bg-info">问答</span>
                                    <span class="badge bg-success">教育</span>
                                </div>
                            </div>
                            <p class="project-description">一个趣味十足的问答游戏，涵盖多个学科知识，包括科学、历史、地理等。游戏设有计时器、得分系统和多种难度级别，可以自定义问题和答案，适合课堂互动和知识竞赛。</p>
                            <div class="project-meta">
                                <div class="meta-item">
                                    <i class="bi bi-people-fill"></i>
                                    <span>适合年龄: 9-15岁</span>
                                </div>
                                <div class="meta-item">
                                    <i class="bi bi-stars"></i>
                                    <span>推荐指数: 
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-half"></i>
                                        <i class="bi bi-star"></i>
                                    </span>
                                </div>
                                <div class="meta-item">
                                    <i class="bi bi-lightning-fill"></i>
                                    <span>难度: 中等</span>
                                </div>
                            </div>
                            <div class="project-actions">
                                <a href="#" class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#projectDemoModal4"><i class="bi bi-play-fill"></i> 运行演示</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 项目5 -->
                <div class="col-lg-6 col-md-6" data-aos="fade-up" data-aos-delay="400" data-category="game">
                    <div class="featured-project-card">
                        <div class="project-preview">
                            <img src="assets/images/projects/space-shooter.jpg" alt="太空射击游戏" class="img-fluid">
                            <div class="project-overlay">
                                <button class="btn btn-light play-demo-btn" data-bs-toggle="modal" data-bs-target="#projectDemoModal5">
                                    <i class="bi bi-play-circle-fill"></i> 查看演示
                                </button>
                            </div>
                        </div>
                        <div class="project-content">
                            <div class="project-header">
                                <h4>银河守护者射击游戏</h4>
                                <div class="project-badges">
                                    <span class="badge bg-primary">游戏</span>
                                    <span class="badge bg-warning">挑战</span>
                                </div>
                            </div>
                            <p class="project-description">一款刺激的太空射击游戏，玩家控制宇宙飞船，击败外星入侵者并保护地球。游戏包含多种武器升级、敌人种类和精美的视觉效果，是掌握事件处理和碰撞检测的绝佳练习。</p>
                            <div class="project-meta">
                                <div class="meta-item">
                                    <i class="bi bi-people-fill"></i>
                                    <span>适合年龄: 10-16岁</span>
                                </div>
                                <div class="meta-item">
                                    <i class="bi bi-stars"></i>
                                    <span>推荐指数: 
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star"></i>
                                    </span>
                                </div>
                                <div class="meta-item">
                                    <i class="bi bi-lightning-fill"></i>
                                    <span>难度: 高级</span>
                                </div>
                            </div>
                            <div class="project-actions">
                                <a href="#" class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#projectDemoModal5"><i class="bi bi-play-fill"></i> 运行演示</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 项目6 -->
                <div class="col-lg-6 col-md-6" data-aos="fade-up" data-aos-delay="500" data-category="animation">
                    <div class="featured-project-card">
                        <div class="project-preview">
                            <img src="assets/images/projects/animation-studio.jpg" alt="动画工作室" class="img-fluid">
                            <div class="project-overlay">
                                <button class="btn btn-light play-demo-btn" data-bs-toggle="modal" data-bs-target="#projectDemoModal6">
                                    <i class="bi bi-play-circle-fill"></i> 查看演示
                                </button>
                            </div>
                        </div>
                        <div class="project-content">
                            <div class="project-header">
                                <h4>迷你动画工作室</h4>
                                <div class="project-badges">
                                    <span class="badge bg-success">动画</span>
                                    <span class="badge bg-info">创意</span>
                                </div>
                            </div>
                            <p class="project-description">一个功能全面的动画创作工具，可以创建角色、设计场景并制作简短的动画故事。项目支持关键帧动画、多层编辑和特效添加，是学习动画原理和创意表达的理想平台。</p>
                            <div class="project-meta">
                                <div class="meta-item">
                                    <i class="bi bi-people-fill"></i>
                                    <span>适合年龄: 9-14岁</span>
                                </div>
                                <div class="meta-item">
                                    <i class="bi bi-stars"></i>
                                    <span>推荐指数: 
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                    </span>
                                </div>
                                <div class="meta-item">
                                    <i class="bi bi-lightning-fill"></i>
                                    <span>难度: 中等</span>
                                </div>
                            </div>
                            <div class="project-actions">
                                <a href="#" class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#projectDemoModal6"><i class="bi bi-play-fill"></i> 运行演示</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 分页导航 -->
            <nav aria-label="分页导航" class="mt-5">
                <ul class="pagination justify-content-center">
                    <li class="page-item disabled">
                        <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
                            <i class="bi bi-chevron-left"></i>
                        </a>
                    </li>
                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#">
                            <i class="bi bi-chevron-right"></i>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </main>

    <!-- 回到顶部按钮 -->
    <button class="scroll-top-btn" id="scrollTopBtn">
        <i class="bi bi-arrow-up"></i>
    </button>

    <!-- 项目演示模态框 -->
    <!-- 模态框1：平台跳跃游戏 -->
    <div class="modal fade" id="projectDemoModal1" tabindex="-1" aria-labelledby="projectDemoModal1Label" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="projectDemoModal1Label">冒险岛平台跳跃</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-0">
                    <div class="ratio ratio-16x9">
                        <iframe src="about:blank" title="冒险岛平台跳跃游戏演示" allowfullscreen></iframe>
                    </div>
                    <div class="p-4">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="project-features p-4 rounded">
                                    <h5>项目特点</h5>
                                    <ul class="feature-list">
                                        <li><i class="bi bi-check-circle-fill text-success"></i> 多关卡平台跳跃游戏，难度逐步提升</li>
                                        <li><i class="bi bi-check-circle-fill text-success"></i> 角色可以跳跃、移动并收集金币和道具</li>
                                        <li><i class="bi bi-check-circle-fill text-success"></i> 包含陷阱、敌人和移动平台等游戏元素</li>
                                        <li><i class="bi bi-check-circle-fill text-success"></i> 生命值系统和关卡计时器</li>
                                        <li><i class="bi bi-check-circle-fill text-success"></i> 精美的游戏界面和背景音乐</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="p-4">
                                    <h5>编程概念</h5>
                                    <div class="d-flex flex-wrap gap-2 mt-3">
                                        <span class="badge bg-light text-dark">事件处理</span>
                                        <span class="badge bg-light text-dark">变量</span>
                                        <span class="badge bg-light text-dark">条件判断</span>
                                        <span class="badge bg-light text-dark">克隆</span>
                                        <span class="badge bg-light text-dark">碰撞检测</span>
                                        <span class="badge bg-light text-dark">坐标系统</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 更多模态框（2-6）结构类似，根据项目内容进行调整 -->
    <!-- 这里为简洁起见省略了其他模态框，实际使用时需要添加完整内容 -->

    <!-- Bootstrap, AOS等JS库 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- 自定义JavaScript -->
    <script>
        // 初始化AOS动画
        AOS.init({
            duration: 800,
            once: true
        });
        
        // 项目筛选功能
        document.addEventListener('DOMContentLoaded', function() {
            const filterBtns = document.querySelectorAll('.filter-btn');
            const projectCards = document.querySelectorAll('[data-category]');
            
            filterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // 移除所有按钮的active类
                    filterBtns.forEach(b => b.classList.remove('active'));
                    // 为当前按钮添加active类
                    this.classList.add('active');
                    
                    const filter = this.getAttribute('data-filter');
                    
                    projectCards.forEach(card => {
                        if (filter === 'all' || card.getAttribute('data-category') === filter) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });
            
            // 搜索功能
            const searchInput = document.querySelector('.search-box input');
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                
                projectCards.forEach(card => {
                    const title = card.querySelector('h4').textContent.toLowerCase();
                    const description = card.querySelector('.project-description').textContent.toLowerCase();
                    
                    if (title.includes(searchTerm) || description.includes(searchTerm)) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
            
            // 回到顶部按钮
            const scrollTopBtn = document.getElementById('scrollTopBtn');
            
            window.addEventListener('scroll', function() {
                if (window.pageYOffset > 300) {
                    scrollTopBtn.classList.add('show');
                } else {
                    scrollTopBtn.classList.remove('show');
                }
            });
            
            scrollTopBtn.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        });
    </script>
    
    <!-- 立即修复模态框问题的内联脚本 -->
    <script>
        // 立即执行函数修复模态框问题
        (function() {
            // 添加必要的样式
            const styleEl = document.createElement('style');
            styleEl.textContent = `
                /* 完全移除modal-backdrop */
                .modal-backdrop {
                    display: none !important;
                    opacity: 0 !important;
                    background: none !important;
                    pointer-events: none !important;
                }
                
                /* 提高模态框的层级 */
                .modal {
                    z-index: 9060 !important;
                    background: none !important;
                }
                
                .modal-content {
                    z-index: 9061 !important;
                    position: relative;
                    background-color: #fff !important;
                    border: 1px solid rgba(0,0,0,.2) !important;
                    border-radius: 0.3rem !important;
                    box-shadow: 0 0.5rem 1rem rgba(0,0,0,.5) !important;
                    pointer-events: auto !important;
                }
                
                .modal-dialog {
                    z-index: 9061 !important;
                    position: relative;
                    pointer-events: auto !important;
                }
                
                /* 确保模态框内所有元素可交互 */
                .modal * {
                    pointer-events: auto !important;
                }
                
                /* 禁用所有粒子背景的事件捕获 */
                #particles-js, 
                canvas.particles-js-canvas-el {
                    pointer-events: none !important;
                }
            `;
            document.head.appendChild(styleEl);
            
            // 移除所有现有的modal-backdrop
            function removeAllBackdrops() {
                const backdrops = document.querySelectorAll('.modal-backdrop');
                backdrops.forEach(function(backdrop) {
                    backdrop.remove();
                });
                
                const masks = document.querySelectorAll('.modal-mask');
                masks.forEach(function(mask) {
                    mask.remove();
                });
            }
            
            // 页面加载完成后执行
            window.addEventListener('DOMContentLoaded', function() {
                // 禁用粒子背景的事件捕获
                const particlesEl = document.getElementById('particles-js');
                if (particlesEl) {
                    particlesEl.style.pointerEvents = 'none';
                }
                
                // 移除所有backdrop
                removeAllBackdrops();
                
                // 监听模态框打开事件
                document.querySelectorAll('.modal').forEach(function(modal) {
                    modal.addEventListener('show.bs.modal', function() {
                        // 确保模态框在最上层
                        this.style.zIndex = '9060';
                        
                        // 移除所有backdrop
                        setTimeout(removeAllBackdrops, 10);
                    });
                    
                    // 模态框显示后再次检查
                    modal.addEventListener('shown.bs.modal', function() {
                        removeAllBackdrops();
                    });
                });
            });
            
            // 修复模态框关闭后的问题
            document.addEventListener('hidden.bs.modal', function() {
                removeAllBackdrops();
                
                // 修复body样式
                document.body.classList.remove('modal-open');
                document.body.style.overflow = '';
                document.body.style.paddingRight = '';
            }, true);
            
            // 定期检查并移除可能出现的backdrop
            setInterval(removeAllBackdrops, 500);
        })();
    </script>
    
    <!-- 添加额外的修复脚本 -->
    <script>
        // 确保Bootstrap正确加载
        document.addEventListener('DOMContentLoaded', function() {
            // 检查Bootstrap是否已加载
            if (typeof bootstrap === 'undefined') {
                console.error('Bootstrap未正确加载，尝试重新加载...');
                // 重新加载Bootstrap
                const script = document.createElement('script');
                script.src = 'https://cdn.bootcdn.net/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js';
                script.onload = function() {
                    console.log('Bootstrap已重新加载');
                    // 移除所有backdrop
                    document.querySelectorAll('.modal-backdrop').forEach(function(backdrop) {
                        backdrop.remove();
                    });
                };
                document.head.appendChild(script);
            } else {
                console.log('Bootstrap已正确加载');
                // 移除所有backdrop
                document.querySelectorAll('.modal-backdrop').forEach(function(backdrop) {
                    backdrop.remove();
                });
            }
        });
        
        // 监听模态框事件
        document.addEventListener('shown.bs.modal', function() {
            // 模态框显示后，移除所有backdrop
            document.querySelectorAll('.modal-backdrop').forEach(function(backdrop) {
                backdrop.remove();
            });
        });
    </script>
</body>
</html> 